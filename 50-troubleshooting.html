<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Troubleshooting :: RH Data Grid Workshop</title>
    <link rel="canonical" href="https://alvarolop.github.io/rhdg-workshop/50-troubleshooting.html">
    <link rel="prev" href="40-cache-configuration.html">
    <link rel="next" href="60-advanced-exercises.html">
    <meta name="generator" content="Antora 3.0.3">
    <link rel="stylesheet" href="./_/css/site.css">
<link rel="icon" href="./_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="./_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://alvarolop.github.io/rhdg-workshop">RH Data Grid Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kafka-tutorial/" target="_blank">Kafka</a>
            <a class="navbar-item" href="https://devsecops-workshop.github.io/" target="_blank">DevSecOps</a>
            <a class="navbar-item" href="https://acidonper.github.io/redhat-workshop-cicd-gitops/redhat-workshop-cicd-gitops/" target="_blank">CI/CD & GitOps</a>
            <a class="navbar-item" href="https://atarazana.github.io/gramola-gitops-guide/gramola-gitops-guide/" target="_blank">Gramola GitOps Guide</a>
            <a class="navbar-item" href="https://luisarizmendi.github.io/tutorial-secure-onboarding/" target="_blank">Secure Edge device onboarding with RHEL and FDO</a>
            <a class="navbar-item" href="https://xbryan1.github.io/rhte-2023-acm-docs/" target="_blank">Multicluster Application Deployment with Advanced Cluster Management and GitOps</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="10-introduction.html">1. Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="20-setup.html">2. Environment Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20-setup.html#prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20-setup.html#parameters">Parameters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20-setup.html#access-console">Access - OCP Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20-setup.html#access-cli">Access - OC Client</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="30-server-configuration.html">3. Server Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="40-cache-configuration.html">4. Cache Configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="50-troubleshooting.html">5. Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="60-advanced-exercises.html">6. Advanced Exercises</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="70-conclusions.html">7. Conclusions</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">RHDG Workshop</a></li>
    <li><a href="50-troubleshooting.html">5. Troubleshooting</a></li>
  </ul>
</nav>
  <div style="padding: 0 0.5rem 0 0.75rem;"><a href="https://github.com/alvarolop" target="_blank" rel="noopener noreferrer"> © 2023 - Álvaro López Medina</a></div>
</div>  <div class="content">
<article class="doc">
<h1 class="page">Troubleshooting</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As we move forward to our final phase, we enter the Troubleshooting Section. Here, we provide you with essential tools and techniques to tackle any issues that come your way. As an administrator of the infrastructure, you&#8217;ll master the art of collecting cluster information for effective debugging. Join us in this enlightening section to strengthen your troubleshooting skills and enhance your cache optimization abilities.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start by collecting important details about the Openshift setup, including CRDs and pod logs and events. Then, we&#8217;ll dig into examining the Data Grid server, getting the caches' configuration and a complete server report. Lastly, we&#8217;ll focus on JVM debugging, getting info from the Java Heap Dump and Java Thread Dump.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openshift_information"><a class="anchor" href="#_openshift_information"></a>Openshift information</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_retrieving_the_list_of_server_pods"><a class="anchor" href="#_retrieving_the_list_of_server_pods"></a>Retrieving the list of server pods</h3>
<div class="paragraph">
<p>This might seem trivial, but we need to list the pods to then execute other commands inside the pods. Execute the following command to retrieve the full list of pods:</p>
</div>
<div class="listingblock lines_space console-input">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n {user}-rhdg</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="title">Output of the previous command</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc login -u {user} -p openshift {cluster_api}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retrieving_the_openshift_configuration"><a class="anchor" href="#_retrieving_the_openshift_configuration"></a>Retrieving the Openshift configuration</h3>
<div class="ulist">
<ul>
<li>
<p>oc adm inspect namespace/&lt;rhdg-namespace&gt;</p>
</li>
<li>
<p>Or do it manually.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_server_debugging_and_maintaining"><a class="anchor" href="#_server_debugging_and_maintaining"></a>Server debugging and maintaining</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_retrieving_the_data_grid_server_report"><a class="anchor" href="#_retrieving_the_data_grid_server_report"></a>Retrieving the Data Grid server report</h3>
<div class="paragraph">
<p><a href="https://github.com/alvarolop/rhdg8-server#retrieve-server-reports-from-openshift" class="bare">https://github.com/alvarolop/rhdg8-server#retrieve-server-reports-from-openshift</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_problems_with_cache_configurations"><a class="anchor" href="#_problems_with_cache_configurations"></a>Problems with cache configurations?</h3>
<div class="paragraph">
<p><a href="https://github.com/alvarolop/rhdg8-server#annex-convert-cache-configurations" class="bare">https://github.com/alvarolop/rhdg8-server#annex-convert-cache-configurations</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_useful_rest_api_operations"><a class="anchor" href="#_other_useful_rest_api_operations"></a>Other useful REST API operations</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Problems with Protobuf? You can list all the <code>.proto</code> files using the REST API.</p>
</li>
<li>
<p>Problems with cache definitions? Retrieve the list of caches, its configuration and its status (Healthy or not).</p>
</li>
<li>
<p>Problems with Server tasks? List them using REST.</p>
</li>
<li>
<p>Problems with the content of a cache? Empty the cache using REST.</p>
</li>
<li>
<p>Problems with indexes? Reindex a cache.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_when_should_add_here_a_section_about_cross_site_replication"><a class="anchor" href="#_when_should_add_here_a_section_about_cross_site_replication"></a>When should add here a section about cross-site replication</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_jvm_debugging"><a class="anchor" href="#_jvm_debugging"></a>JVM debugging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_problems_with_the_jvm_memory_on_cluster_pods"><a class="anchor" href="#_problems_with_the_jvm_memory_on_cluster_pods"></a>Problems with the JVM memory on cluster pods?</h3>
<div class="ulist">
<ul>
<li>
<p>Java Thread Dump</p>
</li>
<li>
<p>Java Heap Dump</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_reached_file_limit_descriptors_on_a_pod"><a class="anchor" href="#_reached_file_limit_descriptors_on_a_pod"></a>Reached file limit descriptors on a pod?</h3>

</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="40-cache-configuration.html">4. Cache Configuration</a></span>
  <span class="next"><a href="60-advanced-exercises.html">6. Advanced Exercises</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="./_/js/vendor/clipboard.js"></script>
<script src="./_/js/site.js"></script>
<script async src="./_/js/vendor/highlight.js"></script>
  </body>
</html>
